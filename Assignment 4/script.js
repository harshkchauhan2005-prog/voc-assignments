(() => {
 
  const LIB = {
    emoji: ["🍎","🍌","🍓","🍇","🍉","🍒","🍍","🥝","🥑","🥕","🌶️","🍄","🍔","🍕","🍟","🌭","🍿","🧁","🍪","🍩","🍰","🍫","🍬","🍭","☕","🍵","🥤","🍺","🍷","🥨","🥐","🥞","🧇","🍗","🍤","🍣","🍱"],
    shapes: ["★","◆","●","▲","■","✦","✿","☘","✺","✚","☀","☁","☂","♠","♥","♦","♣","☯","∞","⚑","✈","⌘","⌂","☾","✤","✧","❖","❀","✪","✩","✷","✚","✕","➤","➕","◉","◍"],
    animals:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐨","🐯","🦁","🐮","🐷","🐸","🐵","🐔","🐧","🐦","🦉","🦄","🐝","🦋","🐢","🐙","🦑","🐠","🐳","🦖","🐍","🦓","🦒","🦘","🦥","🐇","🐿","🦊"],
    food:   ["🍕","🍔","🌮","🌯","🍣","🍜","🍙","🍛","🥗","🍞","🧀","🥪","🍰","🍦","🍪","🍩","🍫","🍓","🍇","🍉","🍋","🍑","🍒","🍍","🥝","🥑","🍗","🥟","🥞","🧇","🍝","🍱","🍤","🍲","🍢","🍧"] //
    ,

    coding: [
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" ><linearGradient id="HjBUFHyNtcsDcBgnZBZ2Sa" x1="37.8" x2="37.8" y1="43.37" y2="7.42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#29b6f6"/><stop offset="1" stop-color="#13b2f6"/></linearGradient><path fill="url(#HjBUFHyNtcsDcBgnZBZ2Sa)" d="M34.176,4.249c0.188,0.092,5.688,2.716,8.374,3.998C43.437,8.67,44,9.564,44,10.546v26.86	c0,0.981-0.559,1.874-1.443,2.299c-2.548,1.228-7.611,3.666-7.948,3.826C34.361,43.649,33.709,44,33.181,44	c-0.678,0-1.133-0.316-1.58-0.73L34,35.711V5.715l-2.254-1.135C32.228,4.109,32.896,4,33.291,4C33.653,4,33.948,4.138,34.176,4.249z"/><linearGradient id="HjBUFHyNtcsDcBgnZBZ2Sb" x1="6.085" x2="34.793" y1="34.801" y2="7.173" gradientUnits="userSpaceOnUse"><stop offset=".115" stop-color="#0076bb"/><stop offset=".257" stop-color="#0069b0"/><stop offset=".28" stop-color="#0069b0"/><stop offset=".424" stop-color="#0069b0"/><stop offset=".491" stop-color="#0072b7"/><stop offset=".577" stop-color="#0076bb"/><stop offset=".795" stop-color="#0076bb"/><stop offset="1" stop-color="#006eb9"/></linearGradient><path fill="url(#HjBUFHyNtcsDcBgnZBZ2Sb)" d="M9,33.896l25-19.023V5.83c0-1.299-1.662-1.808-2.337-1.184	C31.008,5.25,4.658,29.239,4.658,29.239c-0.9,0.83-0.849,2.267,0.107,3.032c0,0,1.324,1.232,1.803,1.574	C7.304,34.37,8.271,34.43,9,33.896z"/><path fill="#0288d1" d="M9,14.104l25,19.054v8.771c0,1.198-1.42,2.193-2.399,1.341L4.658,18.761	c-0.9-0.83-0.849-2.267,0.107-3.032c0,0,1.324-1.232,1.803-1.574C7.304,13.63,8.271,13.57,9,14.104z"/></svg>',
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" ><path fill="#0277BD" d="M24.047,5c-1.555,0.005-2.633,0.142-3.936,0.367c-3.848,0.67-4.549,2.077-4.549,4.67V14h9v2H15.22h-4.35c-2.636,0-4.943,1.242-5.674,4.219c-0.826,3.417-0.863,5.557,0,9.125C5.851,32.005,7.294,34,9.931,34h3.632v-5.104c0-2.966,2.686-5.896,5.764-5.896h7.236c2.523,0,5-1.862,5-4.377v-8.586c0-2.439-1.759-4.263-4.218-4.672C27.406,5.359,25.589,4.994,24.047,5z M19.063,9c0.821,0,1.5,0.677,1.5,1.502c0,0.833-0.679,1.498-1.5,1.498c-0.837,0-1.5-0.664-1.5-1.498C17.563,9.68,18.226,9,19.063,9z"/><path fill="#FFC107" d="M23.078,43c1.555-0.005,2.633-0.142,3.936-0.367c3.848-0.67,4.549-2.077,4.549-4.67V34h-9v-2h9.343h4.35c2.636,0,4.943-1.242,5.674-4.219c0.826-3.417,0.863-5.557,0-9.125C41.274,15.995,39.831,14,37.194,14h-3.632v5.104c0,2.966-2.686,5.896-5.764,5.896h-7.236c-2.523,0-5,1.862-5,4.377v8.586c0,2.439,1.759,4.263,4.218,4.672C19.719,42.641,21.536,43.006,23.078,43z M28.063,39c-0.821,0-1.5-0.677-1.5-1.502c0-0.833,0.679-1.498,1.5-1.498c0.837,0,1.5,0.664,1.5,1.498C29.563,38.32,28.899,39,28.063,39z"/></svg>',
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" ><polygon fill="#0d91d6" points="24,6 17.99,12.35 11.97,18.69 6,25 6,6"/><polygon fill="#f88909" points="24,6 23.96,6 17.97,12.33 11.96,18.68 6,24.97 6,25 6,25.09 6,42 14.69,33.31 20.87,27.13 27.06,20.94 33.25,14.75 42,6"/><polygon fill="#c757bc" points="14.69,33.31 6,42 6,25.09"/><polygon fill="#d3638f" points="20.87,27.13 14.69,33.31 6,25.09 6,25 11.97,18.69"/><polygon fill="#e07063" points="27.06,20.94 20.87,27.13 11.97,18.69 17.99,12.35"/><polygon fill="#ec7d36" points="33.25,14.75 27.06,20.94 17.99,12.35 24,6"/><polygon fill="#f88909" points="42,6 33.25,14.75 24,6"/><polygon fill="#0095d5" points="11.51,19.15 7.99,22.88 6,21 6,13.94"/><polygon fill="#2b88da" points="15.03,15.42 11.51,19.15 6,13.94 6,6.87"/><polygon fill="#557bde" points="18.56,11.7 15.03,15.42 6,6.87 6,6 12.53,6"/><polygon fill="#806ee3" points="22.08,7.97 18.56,11.7 12.53,6 24,6"/><polygon fill="#0095d5" points="23,25 6,42 9.35,42 17.52,42 40,42"/><polygon fill="#2b88da" points="25.68,42 17.52,42 11.76,36.25 15.84,32.17"/><polygon fill="#557bde" points="33.86,42 25.68,42 15.84,32.17 19.92,28.09"/><polygon fill="#806ee3" points="42,42 33.86,42 19.92,28.09 24,24"/></svg>',
    '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" ><path fill="#9B1010" d="M42 14L40 40 14 42z"/><path fill="#B71C1C" d="M28 28L40 40 42 14z"/><path fill="#C62828" d="M24 12.336A22.621 11.664 0 1 0 24 35.664A22.621 11.664 0 1 0 24 12.336Z" transform="rotate(-45.001 24 24)"/><path fill="#E53935" d="M10 17L17 10 25 6 31 10 28 19 19 27 10 30 6 24z"/><path fill="#FF5252" d="M31,10l-6-4h11L31,10z M42,15l-11-5l-3,9L42,15z M19,27l13.235,5.235L28,19L19,27z M10,30l4,12l5-15L10,30z M6,24v11l4-5L6,24z"/></svg>',
    
    '<svg viewBox="0 0 128 128"><g fill="#1791cf"><path fill-rule="evenodd" d="M61.113 4.886C55.82 17.788 52.629 26.23 46.738 38.749c3.613 3.805 8.047 8.242 15.246 13.25-7.742-3.168-13.02-6.347-16.969-9.648-7.539 15.644-19.351 37.933-43.324 80.77 18.844-10.817 33.45-17.485 47.059-20.032a33.989 33.989 0 0 1-.895-8.023l.024-.602c.296-12.004 6.578-21.238 14.015-20.61 7.438.626 13.223 10.872 12.922 22.876-.055 2.261-.312 4.433-.762 6.449 13.465 2.621 27.914 9.273 46.5 19.941-3.664-6.707-6.933-12.757-10.058-18.52-4.922-3.792-10.055-8.726-20.524-14.073 7.196 1.863 12.348 4.007 16.364 6.406C74.578 38.12 72.004 30.308 61.113 4.886Zm0 0"></path><path d="M121.14 112.57v-3.243h-1.215v-.433h2.93v.433h-1.223v3.243h-.492M123.363 112.57v-3.676h.734l.875 2.601c.082.243.14.426.176.543.043-.132.11-.328.2-.586l.882-2.558h.66v3.676h-.472v-3.079l-1.075 3.079h-.441l-1.066-3.13v3.13h-.473"></path></g> </svg>',
    '<svg viewBox="0 0 128 128"> <path fill="#1572B6" d="M18.814 114.123L8.76 1.352h110.48l-10.064 112.754-45.243 12.543-45.119-12.526z"></path><path fill="#33A9DC" d="M64.001 117.062l36.559-10.136 8.601-96.354h-45.16v106.49z"></path><path fill="#fff" d="M64.001 51.429h18.302l1.264-14.163H64.001V23.435h34.682l-.332 3.711-3.4 38.114h-30.95V51.429z"></path><path fill="#EBEBEB" d="M64.083 87.349l-.061.018-15.403-4.159-.985-11.031H33.752l1.937 21.717 28.331 7.863.063-.018v-14.39z"></path><path fill="#fff" d="M81.127 64.675l-1.666 18.522-15.426 4.164v14.39l28.354-7.858.208-2.337 2.406-26.881H81.127z"></path><path fill="#EBEBEB" d="M64.048 23.435v13.831H30.64l-.277-3.108-.63-7.012-.331-3.711h34.646zm-.047 27.996v13.831H48.792l-.277-3.108-.631-7.012-.33-3.711h16.447z"></path></svg>',

    '<svg viewBox="0 0 128 128">       <path fill="#9B4F96" d="M115.4 30.7L67.1 2.9c-.8-.5-1.9-.7-3.1-.7-1.2 0-2.3.3-3.1.7l-48 27.9c-1.7 1-2.9 3.5-2.9 5.4v55.7c0 1.1.2 2.4 1 3.5l106.8-62c-.6-1.2-1.5-2.1-2.4-2.7z"></path><path fill="#68217A" d="M10.7 95.3c.5.8 1.2 1.5 1.9 1.9l48.2 27.9c.8.5 1.9.7 3.1.7 1.2 0 2.3-.3 3.1-.7l48-27.9c1.7-1 2.9-3.5 2.9-5.4V36.1c0-.9-.1-1.9-.6-2.8l-106.6 62z"></path><path fill="#fff" d="M85.3 76.1C81.1 83.5 73.1 88.5 64 88.5c-13.5 0-24.5-11-24.5-24.5s11-24.5 24.5-24.5c9.1 0 17.1 5 21.3 12.5l13-7.5c-6.8-11.9-19.6-20-34.3-20-21.8 0-39.5 17.7-39.5 39.5s17.7 39.5 39.5 39.5c14.6 0 27.4-8 34.2-19.8l-12.9-7.6zM97 66.2l.9-4.3h-4.2v-4.7h5.1L100 51h4.9l-1.2 6.1h3.8l1.2-6.1h4.8l-1.2 6.1h2.4v4.7h-3.3l-.9 4.3h4.2v4.7h-5.1l-1.2 6h-4.9l1.2-6h-3.8l-1.2 6h-4.8l1.2-6h-2.4v-4.7H97zm4.8 0h3.8l.9-4.3h-3.8l-.9 4.3z"></path></svg> ',

    '<svg viewBox="0 0 128 128"><path fill="#F0DB4F" d="M2 1v125h125V1H2zm66.119 106.513c-1.845 3.749-5.367 6.212-9.448 7.401-6.271 1.44-12.269.619-16.731-2.059-2.986-1.832-5.318-4.652-6.901-7.901l9.52-5.83c.083.035.333.487.667 1.071 1.214 2.034 2.261 3.474 4.319 4.485 2.022.69 6.461 1.131 8.175-2.427 1.047-1.81.714-7.628.714-14.065C58.433 78.073 58.48 68 58.48 58h11.709c0 11 .06 21.418 0 32.152.025 6.58.596 12.446-2.07 17.361zm48.574-3.308c-4.07 13.922-26.762 14.374-35.83 5.176-1.916-2.165-3.117-3.296-4.26-5.795 4.819-2.772 4.819-2.772 9.508-5.485 2.547 3.915 4.902 6.068 9.139 6.949 5.748.702 11.531-1.273 10.234-7.378-1.333-4.986-11.77-6.199-18.873-11.531-7.211-4.843-8.901-16.611-2.975-23.335 1.975-2.487 5.343-4.343 8.877-5.235l3.688-.477c7.081-.143 11.507 1.727 14.756 5.355.904.916 1.642 1.904 3.022 4.045-3.772 2.404-3.76 2.381-9.163 5.879-1.154-2.486-3.069-4.046-5.093-4.724-3.142-.952-7.104.083-7.926 3.403-.285 1.023-.226 1.975.227 3.665 1.273 2.903 5.545 4.165 9.377 5.926 11.031 4.474 14.756 9.271 15.672 14.981.882 4.916-.213 8.105-.38 8.581z"></path></svg>',

    ' <svg viewBox="0 0 128 128"><path fill="#5fa04e" d="M114.313 55.254a.26.26 0 0 0-.145.044l-2.346 1.37a.3.3 0 0 0-.142.26v2.74c0 .116.055.204.142.262l2.346 1.368a.262.262 0 0 0 .29 0l2.342-1.368a.308.308 0 0 0 .145-.263V56.93a.303.303 0 0 0-.145-.26l-2.343-1.371a.26.26 0 0 0-.144-.044zM63.22 71.638c-.427 0-.852.104-1.214.308l-11.549 6.727a2.457 2.457 0 0 0-1.214 2.124V94.22c0 .874.462 1.69 1.214 2.128l3.04 1.746c1.476.728 1.997.726 2.662.726 2.17 0 3.415-1.339 3.415-3.64V81.935a.356.356 0 0 0-.348-.351h-1.474a.356.356 0 0 0-.35.351v13.248c0 1.019-1.069 2.04-2.776 1.167l-3.155-1.835c-.116-.058-.175-.206-.175-.322V80.767c0-.116.059-.26.175-.319l11.545-6.697c.087-.058.233-.058.349 0l11.548 6.697c.115.059.172.174.172.32v13.424c0 .145-.057.264-.172.322l-11.548 6.727c-.087.058-.233.058-.349 0l-2.951-1.779c-.087-.058-.203-.087-.29-.029-.81.466-.952.527-1.734.789-.174.058-.463.173.115.493l3.85 2.302c.376.203.78.319 1.214.319.434 0 .867-.115 1.214-.26l11.549-6.727a2.463 2.463 0 0 0 1.214-2.128V80.797c0-.874-.462-1.687-1.214-2.124l-11.549-6.727a2.488 2.488 0 0 0-1.214-.308Zm18.03 6.13a2.236 2.236 0 0 0-2.227 2.243 2.236 2.236 0 0 0 2.227 2.242c1.217 0 2.228-1.019 2.228-2.242a2.254 2.254 0 0 0-2.228-2.242zm-.03.379a1.86 1.86 0 0 1 1.883 1.864c0 1.02-.84 1.894-1.882 1.894-1.012 0-1.852-.846-1.852-1.894s.869-1.864 1.852-1.864zm-.809.611v2.562h.494v-1.016h.434c.174 0 .231.058.26.203 0 .03.086.67.086.786h.52c-.058-.116-.087-.466-.116-.67-.028-.32-.056-.553-.404-.582.174-.059.463-.146.463-.612 0-.67-.58-.67-.868-.67zm.435.408h.404c.146 0 .376 0 .376.349 0 .116-.056.351-.376.351h-.405zm-14.47 2.01c-3.3 0-5.268 1.398-5.268 3.757 0 2.534 1.968 3.23 5.123 3.551 3.79.379 4.08.933 4.08 1.69 0 1.31-1.044 1.864-3.475 1.864-3.068 0-3.733-.758-3.965-2.301 0-.175-.142-.29-.316-.29H61.05a.35.35 0 0 0-.346.349c0 1.98 1.041 4.31 6.107 4.31 3.645 0 5.758-1.458 5.758-4.02 0-2.505-1.68-3.174-5.238-3.64-3.59-.466-3.965-.728-3.965-1.572 0-.699.318-1.63 2.98-1.63 2.373 0 3.269.525 3.617 2.126a.34.34 0 0 0 .319.26h1.533c.088 0 .175-.057.234-.115a.476.476 0 0 0 .085-.263c-.231-2.795-2.053-4.077-5.758-4.077z"></path><path fill="#333" d="M86.072 24.664a.71.71 0 0 0-.352.089.755.755 0 0 0-.375.638V44.32c0 .174-.09.35-.263.466a.549.549 0 0 1-.52 0l-3.066-1.775a1.486 1.486 0 0 0-1.478 0L67.75 50.146a1.48 1.48 0 0 0-.753 1.279v14.24c0 .524.29 1.02.753 1.282l12.27 7.135a1.486 1.486 0 0 0 1.477 0l12.269-7.135c.463-.262.753-.758.753-1.282V30.168c0-.553-.29-1.05-.753-1.311l-7.32-4.104a.836.836 0 0 0-.373-.089zM13.687 42.43c-.231 0-.462.084-.664.2L.753 49.739A1.493 1.493 0 0 0 0 51.047l.03 19.102c0 .263.143.525.375.642a.656.656 0 0 0 .724 0l7.294-4.193c.463-.262.75-.758.75-1.282v-8.94c0-.524.29-1.02.754-1.282l3.096-1.805c.231-.146.493-.204.753-.204s.521.058.724.204l3.096 1.805c.463.262.753.758.753 1.282v8.94c0 .524.288 1.02.75 1.282l7.236 4.193a.704.704 0 0 0 .753 0 .724.724 0 0 0 .376-.642V51.047c0-.524-.29-1.02-.754-1.283L14.47 42.63a1.763 1.763 0 0 0-.664-.201Zm100.667.21c-.253 0-.504.066-.736.198l-12.272 7.131c-.463.262-.75.758-.75 1.283v14.24c0 .524.287 1.02.75 1.282l12.184 6.987a1.43 1.43 0 0 0 1.447 0l7.38-4.133a.724.724 0 0 0 .375-.642.724.724 0 0 0-.375-.64L110.03 61.21a.76.76 0 0 1-.375-.641v-4.456a.72.72 0 0 1 .375-.64l3.85-2.214a.705.705 0 0 1 .753 0l3.846 2.213a.762.762 0 0 1 .378.641v3.495c0 .263.144.525.375.641a.704.704 0 0 0 .754 0l7.291-4.28a1.46 1.46 0 0 0 .724-1.283v-3.465c0-.524-.29-1.017-.724-1.28l-12.184-7.104a1.499 1.499 0 0 0-.738-.198zM80.757 53.274c.065 0 .131.015.19.045l4.194 2.446c.116.058.175.202.175.319v4.892c0 .146-.059.264-.175.322l-4.195 2.446a.431.431 0 0 1-.378 0l-4.195-2.446c-.116-.058-.175-.205-.175-.322v-4.892c0-.146.06-.261.175-.32l4.195-2.445a.425.425 0 0 1 .19-.045z"></path><path fill="url(#a)" d="M47.982 42.893a1.484 1.484 0 0 0-1.476 0L34.322 49.97a1.456 1.456 0 0 0-.724 1.281v14.181c0 .525.29 1.02.724 1.282l12.184 7.076a1.484 1.484 0 0 0 1.476 0l12.183-7.076c.463-.262.724-.757.724-1.282V51.251c0-.524-.29-1.02-.724-1.281z"></path><path fill="url(#b)" d="m60.194 49.97-12.241-7.077a1.996 1.996 0 0 0-.376-.145L33.859 66.364c.116.146.26.262.405.35l12.242 7.076c.347.204.752.262 1.128.145l12.879-23.703a.905.905 0 0 0-.319-.262z"></path><path fill="url(#c)" d="M60.194 66.713c.348-.204.608-.553.724-.932l-13.4-23.063c-.346-.058-.723-.029-1.041.175L34.322 49.94l13.11 24.053c.173-.029.376-.087.55-.175z"></path><defs><linearGradient id="a" x1="34.513" x2="27.157" y1="15.535" y2="30.448" gradientTransform="translate(0 24.664) scale(1.51263)" gradientUnits="userSpaceOnUse"><stop stop-color="#3F873F"></stop><stop offset=".33" stop-color="#3F8B3D"></stop><stop offset=".637" stop-color="#3E9638"></stop><stop offset=".934" stop-color="#3DA92E"></stop><stop offset="1" stop-color="#3DAE2B"></stop></linearGradient><linearGradient id="b" x1="30.009" x2="50.533" y1="23.359" y2="8.288" gradientTransform="translate(0 24.664) scale(1.51263)" gradientUnits="userSpaceOnUse"><stop offset=".138" stop-color="#3F873F"></stop><stop offset=".402" stop-color="#52A044"></stop><stop offset=".713" stop-color="#64B749"></stop><stop offset=".908" stop-color="#6ABF4B"></stop></linearGradient><linearGradient id="c" x1="21.917" x2="40.555" y1="22.261" y2="22.261" gradientTransform="translate(0 24.664) scale(1.51263)" gradientUnits="userSpaceOnUse"><stop offset=".092" stop-color="#6ABF4B"></stop><stop offset=".287" stop-color="#64B749"></stop><stop offset=".598" stop-color="#52A044"></stop><stop offset=".862" stop-color="#3F873F"></stop></linearGradient></defs></svg>',
    

    '<svg viewBox="0 0 128 128"><path fill="#61dafb" d="M37.965 6.934c-2.12.072-4.14.588-5.965 1.64-3.648 2.106-5.826 5.97-6.805 10.543-.978 4.574-.875 10.013.1 16.1.376 2.347.926 4.815 1.562 7.338-2.503.71-4.916 1.47-7.136 2.318-5.76 2.2-10.52 4.83-13.992 7.965C2.256 55.972 0 59.788 0 64c0 4.212 2.256 8.03 5.729 11.164C9.2 78.3 13.96 80.93 19.72 83.13c2.22.848 4.633 1.606 7.136 2.317-.636 2.523-1.186 4.991-1.562 7.337-.975 6.09-1.076 11.527-.098 16.1.98 4.575 3.155 8.438 6.803 10.544s8.08 2.06 12.531.62c4.45-1.44 9.11-4.247 13.895-8.136 1.844-1.498 3.707-3.206 5.575-5.02 1.866 1.814 3.73 3.522 5.574 5.02 4.784 3.89 9.442 6.697 13.893 8.137 4.45 1.44 8.885 1.485 12.533-.62 3.648-2.107 5.826-5.97 6.805-10.544.978-4.574.873-10.012-.102-16.1-.376-2.347-.924-4.815-1.56-7.338 2.503-.71 4.916-1.47 7.136-2.317 5.76-2.199 10.52-4.83 13.992-7.965C125.744 72.03 128 68.212 128 64s-2.256-8.028-5.729-11.162c-3.472-3.134-8.232-5.766-13.992-7.965-2.22-.847-4.631-1.608-7.134-2.318.636-2.523 1.184-4.992 1.56-7.338.975-6.087 1.076-11.526.098-16.1-.978-4.575-3.154-8.437-6.803-10.543-3.648-2.105-8.08-2.06-12.531-.62-4.45 1.44-9.11 4.248-13.895 8.136-1.844 1.5-3.71 3.208-5.577 5.022-1.867-1.813-3.73-3.523-5.574-5.022-4.783-3.888-9.439-6.698-13.889-8.138-2.226-.72-4.448-1.09-6.57-1.02zm.256 5.545c1.33-.038 2.854.207 4.6.77 3.49 1.13 7.675 3.57 12.093 7.16 1.702 1.382 3.443 2.982 5.197 4.69-3.664 3.96-7.298 8.463-10.814 13.434-6.063.56-11.78 1.456-17.043 2.65-.6-2.374-1.116-4.68-1.463-6.847-.9-5.62-.92-10.465-.152-14.053.767-3.587 2.202-5.767 4.144-6.888.971-.56 2.108-.88 3.438-.916zm51.559 0c1.33.037 2.467.355 3.438.916 1.942 1.12 3.377 3.3 4.144 6.887.768 3.587.75 8.433-.15 14.054-.347 2.165-.862 4.474-1.463 6.846-5.262-1.193-10.98-2.09-17.045-2.649-3.516-4.97-7.152-9.474-10.816-13.435 1.754-1.707 3.497-3.308 5.199-4.69 4.418-3.592 8.603-6.028 12.094-7.158 1.745-.564 3.27-.808 4.6-.77zM64 29.102a123.445 123.445 0 0 1 7.44 8.926c-2.444-.11-4.917-.184-7.44-.184-2.522 0-4.995.073-7.44.184A123.44 123.44 0 0 1 64 29.102zm0 14.308c3.985 0 7.87.157 11.634.44a154.962 154.962 0 0 1 6.199 9.853A154.967 154.967 0 0 1 87.267 64a155.063 155.063 0 0 1-5.434 10.295 155.064 155.064 0 0 1-6.2 9.856c-3.763.283-7.648.441-11.632.441a155.301 155.301 0 0 1-11.638-.44 155.034 155.034 0 0 1-6.197-9.857 154.937 154.937 0 0 1-5.434-10.293 155.031 155.031 0 0 1 5.436-10.297 155.107 155.107 0 0 1 6.2-9.855 155.16 155.16 0 0 1 11.633-.44zm-18.773 1.163a164.291 164.291 0 0 0-3.88 6.35 164.27 164.27 0 0 0-3.56 6.534 123.471 123.471 0 0 1-4.012-10.906c3.59-.8 7.412-1.47 11.452-1.978zm37.547 0a123.501 123.501 0 0 1 11.452 1.978 123.463 123.463 0 0 1-4.012 10.908 164.214 164.214 0 0 0-3.56-6.537 164.291 164.291 0 0 0-3.88-6.35zm-54.409 3.341c1.598 5.154 3.681 10.554 6.23 16.084-2.55 5.532-4.63 10.934-6.23 16.088-2.355-.665-4.61-1.374-6.66-2.156-5.319-2.03-9.524-4.438-12.248-6.898-2.723-2.458-3.893-4.79-3.893-7.033 0-2.242 1.17-4.572 3.893-7.03 2.724-2.46 6.93-4.867 12.248-6.897 2.05-.783 4.305-1.493 6.66-2.159zm71.27 0c2.356.666 4.612 1.376 6.66 2.16 5.32 2.03 9.525 4.436 12.249 6.895 2.723 2.46 3.893 4.79 3.893 7.031 0 2.243-1.17 4.575-3.893 7.033-2.724 2.46-6.93 4.866-12.248 6.897-2.05.782-4.307 1.49-6.662 2.156-1.598-5.153-3.68-10.553-6.227-16.084 2.549-5.532 4.63-10.933 6.229-16.088zM64 52.592A11.41 11.41 0 0 0 52.592 64a11.41 11.41 0 0 0 11.409 11.408A11.41 11.41 0 0 0 75.409 64 11.41 11.41 0 0 0 64 52.592Zm26.214 17.951a123.521 123.521 0 0 1 4.01 10.908c-3.588.8-7.41 1.471-11.448 1.98a164.295 164.295 0 0 0 3.877-6.353 164.27 164.27 0 0 0 3.56-6.535zm-52.427.002a164.17 164.17 0 0 0 3.56 6.533 165.81 165.81 0 0 0 3.88 6.352 123.431 123.431 0 0 1-11.452-1.979 123.474 123.474 0 0 1 4.012-10.906zM32.252 86.82c5.262 1.192 10.98 2.087 17.045 2.646 3.516 4.973 7.152 9.477 10.816 13.44-1.754 1.705-3.495 3.305-5.197 4.69-4.418 3.59-8.607 6.03-12.098 7.16-3.49 1.128-6.095.973-8.037-.148-1.942-1.122-3.375-3.3-4.142-6.887-.768-3.588-.749-8.433.152-14.056.347-2.165.86-4.473 1.461-6.845zm63.495 0c.6 2.372 1.116 4.68 1.463 6.845.9 5.623.92 10.468.152 14.056-.767 3.588-2.202 5.767-4.144 6.89-1.942 1.12-4.546 1.273-8.037.143-3.491-1.13-7.676-3.57-12.094-7.16-1.701-1.383-3.444-2.983-5.197-4.69 3.664-3.96 7.298-8.466 10.814-13.438 6.063-.559 11.78-1.454 17.043-2.646zM56.56 89.972a164.301 164.301 0 0 0 7.441.186 164.301 164.301 0 0 0 7.442-.186 123.436 123.436 0 0 1-7.442 8.93 123.432 123.432 0 0 1-7.44-8.93z"></path></svg>',

    '<svg viewBox="0 0 128 128"><g fill="#181616"><path fill-rule="evenodd" clip-rule="evenodd" d="M64 5.103c-33.347 0-60.388 27.035-60.388 60.388 0 26.682 17.303 49.317 41.297 57.303 3.017.56 4.125-1.31 4.125-2.905 0-1.44-.056-6.197-.082-11.243-16.8 3.653-20.345-7.125-20.345-7.125-2.747-6.98-6.705-8.836-6.705-8.836-5.48-3.748.413-3.67.413-3.67 6.063.425 9.257 6.223 9.257 6.223 5.386 9.23 14.127 6.562 17.573 5.02.542-3.903 2.107-6.568 3.834-8.076-13.413-1.525-27.514-6.704-27.514-29.843 0-6.593 2.36-11.98 6.223-16.21-.628-1.52-2.695-7.662.584-15.98 0 0 5.07-1.623 16.61 6.19C53.7 35 58.867 34.327 64 34.304c5.13.023 10.3.694 15.127 2.033 11.526-7.813 16.59-6.19 16.59-6.19 3.287 8.317 1.22 14.46.593 15.98 3.872 4.23 6.215 9.617 6.215 16.21 0 23.194-14.127 28.3-27.574 29.796 2.167 1.874 4.097 5.55 4.097 11.183 0 8.08-.07 14.583-.07 16.572 0 1.607 1.088 3.49 4.148 2.897 23.98-7.994 41.263-30.622 41.263-57.294C124.388 32.14 97.35 5.104 64 5.104z"></path><path d="M26.484 91.806c-.133.3-.605.39-1.035.185-.44-.196-.685-.605-.543-.906.13-.31.603-.395 1.04-.188.44.197.69.61.537.91zm2.446 2.729c-.287.267-.85.143-1.232-.28-.396-.42-.47-.983-.177-1.254.298-.266.844-.14 1.24.28.394.426.472.984.17 1.255zM31.312 98.012c-.37.258-.976.017-1.35-.52-.37-.538-.37-1.183.01-1.44.373-.258.97-.025 1.35.507.368.545.368 1.19-.01 1.452zm3.261 3.361c-.33.365-1.036.267-1.552-.23-.527-.487-.674-1.18-.343-1.544.336-.366 1.045-.264 1.564.23.527.486.686 1.18.333 1.543zm4.5 1.951c-.147.473-.825.688-1.51.486-.683-.207-1.13-.76-.99-1.238.14-.477.823-.7 1.512-.485.683.206 1.13.756.988 1.237zm4.943.361c.017.498-.563.91-1.28.92-.723.017-1.308-.387-1.315-.877 0-.503.568-.91 1.29-.924.717-.013 1.306.387 1.306.88zm4.598-.782c.086.485-.413.984-1.126 1.117-.7.13-1.35-.172-1.44-.653-.086-.498.422-.997 1.122-1.126.714-.123 1.354.17 1.444.663zm0 0"></path></g></svg>',

    '<svg viewBox="0 0 128 128"> <path fill="#073042" d="M51.3 17.7H23.2C17.6 17.7 13 22.3 13 28c-.2 5.5 4.2 10.1 9.7 10.3h28.9l-.3-20.6z"></path><path fill="#4285F4" d="M115 109.3H23.2c-5.7 0-10.2-4.6-10.2-10.3V27.9c0 5.7 4.6 10.3 10.2 10.4h76.9s15-1.3 15 10v61z"></path><path fill="#3870B2" d="M72.2 72.9C76.3 69.8 77.1 64 74 60c-1.7-2.2-4.3-3.6-7.1-3.7h.3c.5-.1 1.1-.1 1.6 0v-5.7c0-.7-.3-1.3-.9-1.6-.9-.5-2-.2-2.5.7-.2.3-.3.6-.2 1v5.8c-5 .8-8.5 5.5-7.7 10.6v.1c.4 2.4 1.7 4.6 3.7 6l-16.9 36.2h11l7.8-16.6c.9-2 3.3-2.9 5.4-1.9.8.4 1.5 1.1 1.9 1.9l8.1 16.6h11.2L72.2 72.9zm-5.7-1.6c-3.2 0-5.7-2.6-5.7-5.8 0-3.2 2.6-5.7 5.8-5.6 1.5 0 2.8.6 3.9 1.6 2.3 2.2 2.3 5.8.1 8.1-1 1-2.5 1.7-4.1 1.7z"></path><path fill="#FFF" d="M45.2 22.7h39.4v7.2H45.2v-7.2z"></path><path fill="#073042" d="M63.5 59.8c3.1 0 5.7 2.6 5.6 5.8 0 3.1-2.6 5.7-5.8 5.6-3.1 0-5.6-2.6-5.6-5.7 0-1.5.6-2.9 1.7-4s2.6-1.7 4.1-1.7zm2.2-3.3v-6c0-.7-.3-1.3-.9-1.6-.9-.5-2-.2-2.5.7-.2.3-.3.6-.2 1v5.8c-5 .8-8.5 5.5-7.7 10.6v.1c.4 2.4 1.7 4.6 3.7 6l-21.3 45.7c-.8 1.6-.7 3.6.4 5.1 1.6 2.3 4.7 2.9 7 1.3.8-.5 1.4-1.3 1.8-2.1l14.2-30.4c.9-2 3.3-2.9 5.4-1.9.8.4 1.5 1.1 1.9 1.9L82 122.8c1.2 2.5 4.2 3.5 6.7 2.3 2.5-1.2 3.5-4.2 2.3-6.7L69.1 72.9c4-3.2 4.7-9.1 1.5-13.1-1.2-1.6-2.9-2.7-4.9-3.3"></path><path fill="#3DDC84" d="M78.8 29.1c-1.5 0-2.7-1.1-2.7-2.6 0-.7.3-1.5.8-2 1.1-1 2.7-1 3.8 0 .5.5.8 1.2.8 1.9-.1 1.5-1.2 2.6-2.7 2.7M49.2 29c-1.5 0-2.7-1.2-2.7-2.6 0-.7.3-1.4.8-1.9.9-1.1 2.6-1.3 3.7-.4h.1c1.1 1 1.2 2.7.2 3.8l-.3.4c-.5.5-1.2.8-1.9.8m30.5-16.2l5.3-9.2c.3-.5.1-1.1-.3-1.5-.5-.2-1-.1-1.3.3L77.8 12C69 8.1 59 8.1 50.3 12l-5.4-9.4c-.2-.3-.6-.6-1-.6s-.8.2-1 .6c-.2.3-.2.8 0 1.1l5.4 9.2C38.9 18 32.8 27.6 31.9 38.2h64.2c-.8-10.7-7-20.2-16.4-25.3"></path><path fill="#073042" d="M105.6 58.1h-4.2c-.2.1-.4.3-.4.6v66.5c0 .3.2.5.5.5h4.4c5.1 0 9.2-4.2 9.2-9.2V48.8c0 5.1-4.1 9.2-9.2 9.2h-.3z"></path> </svg>'
  ]
  };



  const boardEl = document.getElementById('board');
  const timeEl  = document.getElementById('time');
  const movesEl = document.getElementById('moves');
  const starsEl = document.getElementById('stars');
  const toastEl = document.getElementById('toast');

  const diffSel = document.getElementById('difficulty');
  const setSel  = document.getElementById('symbolSet');
  const newBtn  = document.getElementById('newGame');
  const resetBestBtn = document.getElementById('resetBest');
  const kbdToggle = document.getElementById('kbdToggle');

  const modal = document.getElementById('winModal');
  const playAgainBtn = document.getElementById('playAgain');
  const closeModalBtn = document.getElementById('closeModal');
  const winTimeEl = document.getElementById('winTime');
  const winMovesEl = document.getElementById('winMoves');
  const winStarsEl = document.getElementById('winStars');
  const bestTimeEl = document.getElementById('bestTime');
  const bestMovesEl = document.getElementById('bestMoves');

  let difficulty = diffSel.value; 
  let symbolSet = setSel.value;
  let deck = [];          
  let first = null;      
  let lock = false;      
  let moves = 0;
  let matches = 0;
  let totalPairs = 0;

  let timer = { running:false, startTs:0, elapse:0, id:null };
  let kbdMode = false;

  const fmtTime = (ms) => {
    const s = Math.floor(ms/1000);
    const mm = String(Math.floor(s/60)).padStart(2,'0');
    const ss = String(s%60).padStart(2,'0');
    return `${mm}:${ss}`;
  };
  const shuffle = (arr) => {
    for(let i=arr.length-1; i>0; i--){
      const j = Math.floor(Math.random()*(i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  };
  const showToast = (msg, ms=1800) => {
    toastEl.textContent = msg;
    toastEl.style.display = 'block';
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> toastEl.style.display='none', ms);
  };


  function renderStars(n){ starsEl.textContent = "★".repeat(n); }
function resetTimer(){ timeEl.textContent = "00:00"; }
function renderBest(){ bestTimeEl.textContent = "Time —"; bestMovesEl.textContent = "Moves —"; }
function startTimer(){ timer.running=true; }
function stopTimer(){ timer.running=false; }
function computeStars(){ return 3; }
function saveBest(){ }
function bestKey(){ return "best"; }
function focusIndex(){ }

//   Rating soon
// renderStars(3);
// renderBest();
// renderStars(stars);

// best score soon
// const stars = computeStars(moves, timer.elapse, totalPairs);

// saveBest(timer.elapse, moves);
// renderBest();
 
// time soon
// resetTimer();
// // stopTimer();

 function pairsByDifficulty(d){
    if (d==='easy') return 8;     // 4x4
    if (d==='medium') return 10;  // 5x4
    return 12;                    // hard 6x4
  }
  function gridClass(d){
    if (d==='easy') return 'grid-4x4';
    if (d==='medium') return 'grid-5x4';
    return 'grid-6x4';
  }

  function buildDeck(pairs, set){
    const pool = LIB[set].slice();
    shuffle(pool);
    const chosen = pool.slice(0, pairs);
    const doubled = chosen.flatMap((sym, idx) => ([
      { id:`${idx}-A`, symbol: sym, matched:false },
      { id:`${idx}-B`, symbol: sym, matched:false },
    ]));
    return shuffle(doubled);
  }

  function renderBoard(){
    boardEl.className = `board ${gridClass(difficulty)}`;
    boardEl.innerHTML = '';
    deck.forEach((card, idx) => {
      const cell = document.createElement('button');
      cell.className = 'card';
      cell.setAttribute('role','gridcell');
      cell.setAttribute('data-id', card.id);
      cell.setAttribute('data-idx', idx);
      cell.setAttribute('aria-label','Face down card');
      cell.tabIndex = 0;

      const inner = document.createElement('div');
      inner.className = 'card-inner';

      const back = document.createElement('div');
      back.className = 'face back';
      back.textContent = '❓';

      const front = document.createElement('div');
      front.className = 'face front';
      // front.textContent = card.symbol;
      front.innerHTML = card.symbol;

      inner.appendChild(back);
      inner.appendChild(front);
      cell.appendChild(inner);
      boardEl.appendChild(cell);
    });
  }


   function newGame(){
    difficulty = diffSel.value;
    symbolSet = setSel.value;
    first = null; lock = false; moves = 0; matches = 0;
    totalPairs = pairsByDifficulty(difficulty);
    deck = buildDeck(totalPairs, symbolSet);
    renderBoard();
    movesEl.textContent = '0';
    renderStars(3);
    resetTimer();
    renderBest();
    if (kbdMode) focusIndex(0);
    showToast('New game ready. Good luck!', 1200);
  }

  function flip(el){
    el.classList.add('flipped');
    el.setAttribute('aria-label','Face up card');
  }
  function unflip(a,b){
    a.classList.remove('flipped');
    b.classList.remove('flipped');
    a.setAttribute('aria-label','Face down card');
    b.setAttribute('aria-label','Face down card');
  }
  function markMatched(a,b){
    a.classList.add('matched');
    b.classList.add('matched');
    a.setAttribute('aria-label','Matched card');
    b.setAttribute('aria-label','Matched card');
  }

  function onCardActivate(target){
    if (!(target && target.classList.contains('card'))) return;
    if (lock) return;
    if (target.classList.contains('flipped') || target.classList.contains('matched')) return;

    // start the timer on first action
    if (!timer.running && moves===0 && matches===0) startTimer();

    flip(target);
    if (!first){
      first = target;
      return;
    }

    // second c

     const aIdx = +first.getAttribute('data-idx');
    const bIdx = +target.getAttribute('data-idx');
    moves++; movesEl.textContent = String(moves);

    const a = deck[aIdx], b = deck[bIdx];
    if (a.symbol === b.symbol){
      // Match!
      deck[aIdx].matched = deck[bIdx].matched = true;
      markMatched(first, target);
      matches++;
      first = null;

      // win check
      if (matches === totalPairs){
        stopTimer();
        const stars = computeStars(moves, timer.elapse, totalPairs);
        renderStars(stars);
        winTimeEl.textContent = fmtTime(timer.elapse);
        winMovesEl.textContent = String(moves);
        winStarsEl.textContent = Array.from({length:3}, (_,i)=> i<stars?'★':'☆').join('');
        saveBest(timer.elapse, moves);
        renderBest();
        setTimeout(()=> modal.classList.add('open'), 350);
      }
    } else {
      // Not a match — brief lock + flip back
      lock = true;
      const prev = first;
      first = null;
      setTimeout(()=>{
        unflip(prev, target);
        lock = false;
      }, 650);
    }

    // update star rating live
    const liveStars = computeStars(moves, timer.elapse, totalPairs);
    renderStars(liveStars);
  }
//   key board soon



boardEl.addEventListener('click', (e)=> {
    const target = e.target.closest('.card');
    onCardActivate(target);
  });
  newBtn.addEventListener('click', newGame);
  resetBestBtn.addEventListener('click', ()=>{
    localStorage.removeItem(bestKey());
    renderBest();
    showToast('Best scores cleared for this difficulty.');
  });
  diffSel.addEventListener('change', newGame);
  setSel.addEventListener('change', newGame);
  kbdToggle.addEventListener('change', (e)=> {
    kbdMode = e.target.checked;
    if (kbdMode) focusIndex(0);
  });

  playAgainBtn.addEventListener('click', ()=>{ modal.classList.remove('open'); newGame(); });
  closeModalBtn.addEventListener('click', ()=> modal.classList.remove('open'));
  modal.addEventListener('click', (e)=>{ if (e.target===modal) modal.classList.remove('open'); });

 
  newGame();

})();






